<link rel="stylesheet" href="plyr/dist/plyr.css">
<link rel="stylesheet" href="/static/html/live/live.css">
<div class="live-banner" style="background-image: url(/static/images/live_banner.jpg);"></div>
<div class="wrap clearfix">
  <div class="logo-wrap clearfix">
    <div class="logo-live pull-left" style="background-image: url(/static/images/logo_live.png);"></div>
    <div class="live pull-right" style="background-image: url(/static/images/live.png);"></div>
    <div class="name" style="background-image: url(/static/images/live_text.png);"></div>
  </div>
  <div class="bg-wrap">
    <div class="pic-list-wrap clearfix">
      <!-- 轮播 -->
      <div class="slide-body pull-left">
        <div class="pic">
          <a class="pic-link" href="">
            <img src="/static/images/ex-banner02.jpg" alt="">
            <text class="name">热烈祝贺党的十九届三中全会即将召开</text>
          </a>
        </div>
        <div class="pic">
          <a class="pic-link" href="">
            <img src="/static/images/ex-banner04.jpg" alt="">
            <text class="name">热烈祝贺党的十九届三中全会即将召开</text>
          </a>
        </div>
        <div class="pic">
          <a class="pic-link" href="">
            <img src="/static/images/ex-banner05.jpg" alt="">
            <text class="name">热烈祝贺党的十九届三中全会即将召开</text>
          </a>
        </div>
        <div class="pic">
          <a class="pic-link" href="">
            <img src="/static/images/body-bg.png" alt="">
            <text class="name">热烈祝贺党的十九届三中全会即将召开</text>
          </a>
        </div>
        <div class="pic">
          <a class="pic-link" href="">
            <img src="/static/images/ex-banner01.jpg" alt="">
            <text class="name">热烈祝贺党的十九届三中全会即将召开</text>
          </a>
        </div>
        <ul class="spot clearfix">
          <li class="spot-list active"></li>
          <li class="spot-list"></li>
          <li class="spot-list"></li>
          <li class="spot-list"></li>
          <li class="spot-list"></li>
        </ul>
      </div>
      <!-- 直播和相关报道 -->
      <div class="live-report-wrap pull-right">
        <!-- tab -->
        <div class="tab-wrap clearfix">
          <div class="tab active">直播简介</div>
          <div class="tab">相关报道</div>
        </div>
        <!-- 直播简介列表 -->
        <div class="live-list-wrap active">
          <ul class="live-list">
            <li class="list">
              <div class="name">主题:</div>
              <div class="content">法律援助工作新闻发布会暨“法律援助智能导航服务平台”上线仪式</div>
            </li>
            <li class="list">
              <div class="name">时间:</div>
              <div class="content">2018年4月26日 上午10:00</div>
            </li>
            <li class="list">
              <div class="name">地点:</div>
              <div class="content">司法部新闻发布厅</div>
            </li>
            <li class="list">
              <div class="name">嘉宾:</div>
              <div class="content">熊选国 司法部副部长</div>
            </li>
            <li class="list">
              <div class="name">主持人:</div>
              <div class="content">刘福臣 司法部办公厅主任、新闻发言人 白萍 司法部法律援助工作司司长</div>
            </li>
            <li class="list">
              <div class="name">日程:</div>
              <div class="content">09:00-10:30      李部长大会发言</div>
            </li>
            <li class="list">
              <div class="name">日程:</div>
              <div class="content">09:00-10:30      李部长大会发言</div>
            </li>
            <li class="list">
              <div class="name">日程:</div>
              <div class="content">09:00-10:30      李部长大会发言</div>
            </li>
          </ul>
        </div>
        <!-- 相关报道列表 -->
        <div class="live-list-wrap">
          <ul class="report-list">
            <li class="list">
              <a href="" class="link clearfix">
                <div class="content">熊选国介绍我国法律援助工作基本情况熊选国介绍我国法律援助工作基本情况</div>
                <div class="time">[2017-10-19]</div>
              </a>
            </li>
            <li class="list">
              <a href="" class="link clearfix">
                <div class="content">熊选国介绍我国法律援助工作基本情况熊选国介绍我国法律援助工作基本情况</div>
                <div class="time">[2017-10-19]</div>
              </a>
            </li>
            <li class="list">
              <a href="" class="link clearfix">
                <div class="content">熊选国介绍我国法律援助工作基本情况熊选国介绍我国法律援助工作基本情况</div>
                <div class="time">[2017-10-19]</div>
              </a>
            </li>
            <li class="list">
              <a href="" class="link clearfix">
                <div class="content">熊选国介绍我国法律援助工作基本情况熊选国介绍我国法律援助工作基本情况</div>
                <div class="time">[2017-10-19]</div>
              </a>
            </li>
            <li class="list">
              <a href="" class="link clearfix">
                <div class="content">熊选国介绍我国法律援助工作基本情况熊选国介绍我国法律援助工作基本情况</div>
                <div class="time">[2017-10-19]</div>
              </a>
            </li>
            <li class="list">
              <a href="" class="link clearfix">
                <div class="content">熊选国介绍我国法律援助工作基本情况熊选国介绍我国法律援助工作基本情况</div>
                <div class="time">[2017-10-19]</div>
              </a>
            </li>
            <li class="list">
              <a href="" class="link clearfix">
                <div class="content">熊选国介绍我国法律援助工作基本情况熊选国介绍我国法律援助工作基本情况</div>
                <div class="time">[2017-10-19]</div>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- 直播tab -->
    <div class="tab-live">
      <div class="tab-warp clearfix">
        <div class="tab-box active pull-left"><img src="/static/images/textfi.png" alt="">文字直播</div>
        <div class="tab-box pull-left"><img src="/static/images/videoic.png" alt="">直播视频</div>
        <div class="tab-box pull-left"><img src="/static/images/picic.png" alt="">图片直播</div>
      </div>
      <!-- 文字直播 -->
      <div class="content-live-box active">
        <div class="text-fu-wrap clearfix">
          <!-- 刷新 -->
          <div class="refresh pull-left">
            <img src="/static/images/new_icon.png" alt="">
            <span>刷新</span>
          </div>
          <!-- 手动自动刷新 -->
          <div class="is-auto-wrap clearfix pull-right">
            <span class="active">自动刷新</span>
            <span>手动刷新</span>
          </div>
          <!-- 时间间隔 -->
          <div class="interval pull-right">间隔：<select name="" id="">
            <option value ="volvo">1分钟</option>
            <option value ="saab">5分钟</option>
            <option value="opel">10分钟</option>
            <option value="audi">30分钟</option>
          </select><span class="arow"></span></div>
        </div>
        <ul class="is-auto-list">
          <li class="list">
            <img class="img-time" src="/static/images/time_icon.png" alt="">
            <div class="list-line"></div>
            <div class="name-time clearfix">
              <span>[主持人A]</span>
              <span class="pull-right">15:08</span>
            </div>
            <div class="content-wrap">今天上午我们有幸请到了司法部副部长熊选国先生和我们法律援助司司长、法律援助中心主任白萍女士向大家介绍法律援助的工作情况。有两个环节：第一个环节是介绍法律援助工作情况，第二个环节是提问。今天上午我们有幸请到了司法部副部长熊选国先生和我们法律援助司司长、法律援助中心主任白萍女士向大家介绍法律援助的工作情况。有两个环节：第一个环节是介绍法律援助工作情况，第二个环节是提问。今天上午我们有幸请到了司法部副部长熊选国先生和我们法律援助司司长、法律援助中心主任白萍女士向大家介绍法律援助的工作情况。有两个环节：第一个环节是介绍法律援助工作情况，第二个环节是提问。</div>
          </li>
          <li class="list">
            <img class="img-time" src="/static/images/time_icon.png" alt="">
            <div class="list-line"></div>
            <div class="name-time clearfix">
              <span>[主持人A]</span>
              <span class="pull-right">15:08</span>
            </div>
            <div class="content-wrap">今天上午我们有幸请到了司法部副部长熊选国先生和我们法律援助司司长、法律援助中心主任白萍女士向大家介绍法律援助的工作情况。有两个环节：第一个环节是介绍法律援助工作情况，第二个环节是提问。</div>
          </li>
          <li class="list">
            <img class="img-time" src="/static/images/time_icon.png" alt="">
            <div class="list-line"></div>
            <div class="name-time clearfix">
              <span>[主持人A]</span>
              <span class="pull-right">15:08</span>
            </div>
            <div class="content-wrap">今天上午我们有幸请到了司法部副部长熊选国先生和我们法律援助司司长、法律援助中心主任白萍女士向大家介绍法律援助的工作情况。有两个环节：第一个环节是介绍法律援助工作情况，第二个环节是提问。</div>
          </li>
          <li class="list">
            <img class="img-time" src="/static/images/time_icon.png" alt="">
            <div class="list-line"></div>
            <div class="name-time clearfix">
              <span>[主持人A]</span>
              <span class="pull-right">15:08</span>
            </div>
            <div class="content-wrap">今天上午我们有幸请到了司法部副部长熊选国先生和我们法律援助司司长、法律援助中心主任白萍女士向大家介绍法律援助的工作情况。有两个环节：第一个环节是介绍法律援助工作情况，第二个环节是提问。今天上午我们有幸请到了司法部副部长熊选国先生和我们法律援助司司长、法律援助中心主任白萍女士向大家介绍法律援助的工作情况。有两个环节：第一个环节是介绍法律援助工作情况，第二个环节是提问。今天上午我们有幸请到了司法部副部长熊选国先生和我们法律援助司司长、法律援助中心主任白萍女士向大家介绍法律援助的工作情况。有两个环节：第一个环节是介绍法律援助工作情况，第二个环节是提问。</div>
          </li>
          <li class="list">
            <img class="img-time" src="/static/images/time_icon.png" alt="">
            <div class="list-line"></div>
            <div class="name-time clearfix">
              <span>[主持人A]</span>
              <span class="pull-right">15:08</span>
            </div>
            <div class="content-wrap">今天上午我们有幸请到了司法部副部长熊选国先生和我们法律援助司司长、法律援助中心主任白萍女士向大家介绍法律援助的工作情况。有两个环节：第一个环节是介绍法律援助工作情况，第二个环节是提问。</div>
          </li>
          <li class="list">
            <img class="img-time" src="/static/images/time_icon.png" alt="">
            <div class="list-line"></div>
            <div class="name-time clearfix">
              <span>[主持人A]</span>
              <span class="pull-right">15:08</span>
            </div>
            <div class="content-wrap">今天上午我们有幸请到了司法部副部长熊选国先生和我们法律援助司司长、法律援助中心主任白萍女士向大家介绍法律援助的工作情况。有两个环节：第一个环节是介绍法律援助工作情况，第二个环节是提问。</div>
          </li>
        </ul>
      </div>
      <!-- 视频直播 -->
      <div class="content-live-box">
        <div class="name">正在直播:</div>
        <div class="plyt-wrap">
          <div class="player one-plyr">
            <video poster="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-HD.jpg" controls crossorigin>
              <!-- 视频文件 -->
              <source src="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4" type="video/mp4">
              <source src="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-HD.jpg" type="video/webm">
              <!-- 针对不支持 <video> 元素的兼容 -->
              <a href="http://vjs.zencdn.net/v/oceans.webm">下载</a>
            </video>
          </div>
        </div>
      </div>
      <!-- 图片直播 -->
      <div class="content-live-box">
        <div class="name">图片直播:</div>
        <ul class="live-pic-list clearfix">
        </ul>
      </div>
    </div>
  </div>
  <div class="see-pic-wrap">
    <div class="close-box">
      <div class="ch-wrap"></div>
    </div>
    <div class="content">
      <img class="zimg" src="/static/images/ex-pic17.jpg" alt="">
      <div class="namt-text">这是详细文本</div>
      <div class="arow right" data-fx="right">&rsaquo;</div>
      <div class="arow left" data-fx="left">&lsaquo;</div>
      <div class="pic-lis-wrap clearfix">
        <ul class="clearfix">
        </ul>
      </div>
    </div>
  </div>
</div>
<script>
  var $ = require('components/jquery/jquery');
  $(function () {
    // 上部分轮播图
    var width = 625;
    var num = 0;
    var next = 0;
    var swite = true;
    var as = $('.slide-body .pic');
    var spot = $('.spot .spot-list');
    for(var i = 0;i<as.length;i++){
      if(i==0){
          continue;
      }
      as.eq(i).css({left:width});
    }
    $('.slide-body ').on('mouseover',function(){
        clearInterval(t);
    })
    $('.slide-body ').on('mouseout',function(){
        t=setInterval(moveLeft,4000);
    })
    var moveLeft = function () {
      next++;
      if (next === as.length) {
        next = 0;
      }
      as.eq(next).css({left:width});
      as.eq(num).animate({left: -width}, function () {
        swite = true;
      });
      as.eq(next).animate({left: 0});
      num = next;
      for (j = 0; j < spot.length; j++) {
        spot.eq(j).removeClass('active');
      }
      spot.eq(num).addClass('active');
    }
    spot.on('click', function () {
      if (swite) {
        swite = false;
        var index = $(this).index();
        var len = spot.length;
        for (var i = 0; i < len; i++) {
          spot.eq(i).removeClass('active');
          as.eq(i).css({left:width});
        }
        $(this).addClass('active');
        as.eq(index).animate({left:0},function(){
          swite = true;
        });
        num = index;
        next = num;
      } else {
        return;
      }
    });
    // 下部tab图标转换
    var t = setInterval(moveLeft, 2000);
    var tab = $('.tab-wrap .tab');
    var tabWrap = $('.live-report-wrap .live-list-wrap');
    tab.on('click', function () {
      var index = $(this).index();
      for (var i = 0; i < tab.length; i++) {
        tab.eq(i).removeClass('active');
        tabWrap.eq(i).removeClass('active');
      }
      tab.eq(index).addClass('active');
      tabWrap.eq(index).addClass('active');
    });
    var dbTab = $('.tab-warp .tab-box');
    var liveBox = $('.tab-live .content-live-box');
    var feIcon = ['textfi.png', 'videofi.png', 'picfi.png'];
    var icone = ['textic.png', 'videoic.png', 'picic.png'];
    dbTab.on('click', function () {
      var index = $(this).index();
      var nowSrc = '/static/images/' + feIcon[index];
      dbTab.removeClass('active');
      liveBox.removeClass('active');
      dbTab.eq(index).addClass('active');
      liveBox.eq(index).addClass('active');
      for (var c = 0; c < dbTab.length; c++) {
        var oldSrc = '/static/images/' + icone[c]
        dbTab.eq(c).find('img').attr('src', oldSrc);
      }
      dbTab.eq(index).find('img').attr('src', nowSrc);
      if (index === 1) {
        var main = require('modules/js/main');
        main.Plyr.init('.plyt-wrap .player');
        console.log('视频')
      }
    });
    // 手动自动刷新
    var isAuto = $('.is-auto-wrap span');
    isAuto.on('click', function () {
      var index = $(this).index;
      isAuto.removeClass('active');
      $(this).addClass('active');
    });
    // 查看图片
    var srclist = [
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/body-bg.png'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/ex-pic17.jpg'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/ex-pic07.jpg'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/ex-pic18.jpg'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/ex-pic17.jpg'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/ex-pic07.jpg'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/body-bg.png'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/ex-pic17.jpg'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/ex-pic07.jpg'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/ex-pic18.jpg'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/ex-pic17.jpg'},
      {name: '司法部法律援助工作司司长白萍', src: '/static/images/ex-pic07.jpg'}
    ]
    var watchPic = function (list) {
      var arr = list?list:[];
      var picPar = $('.pic-lis-wrap');
      var picCh = picPar.find('ul');
      var picLi = picCh.find('.list');
      var width = 130 * arr.length;
      for (var i = 0; i < arr.length; i++) {
        var src = arr[i].src;
        var name = arr[i].name;
        var li = $('<li class="list" data-src="'+src+'">' +
            '<img class="listImg" src="'+src+'" alt="">' +
          '</li>');
        var listLi = $('<li class="list" data-index="'+i+'" data-src="'+arr[i].src+'">' +
            '<img src="'+arr[i].src+'" alt="">' +
            '<span class="name">'+arr[i].name+'</span>' +
          '</li>')
        picCh.append(li);
        $('.live-pic-list').append(listLi);
      }
      picCh.css('width', width + 'px');
      var ylIndex = 0;
      $('.live-pic-list').find('.list').on('click', function () {
        var src = $(this).data('src');
        var index = $(this).data('index');
        $('.see-pic-wrap').addClass('active');
        $('.see-pic-wrap').find('.zimg').attr('src', src);
        ylIndex = index;
      });
      $('.close-box').on('click', function () {
        $('.see-pic-wrap').removeClass('active');
      });
      var rightFn = function () {
        ylIndex++;
        if(ylIndex >= arr.length) {
          ylIndex = 0;
          leftNum = 0;
          dbSwite = false;
          picCh.animate({left: leftNum}, function () {
            dbSwite = true;
          });
        }
        var src = arr[ylIndex].src;
        var textCone = arr[ylIndex].name;
        $('.see-pic-wrap').find('.namt-text').text(textCone);
        $('.see-pic-wrap').find('.zimg').attr('src', src);
      }
      var leftFn = function () {
        ylIndex--;
        if(ylIndex < 0) {
          ylIndex = arr.length - 1;
        }
        var src = arr[ylIndex].src;
        var textCone = arr[ylIndex].name;
        $('.see-pic-wrap').find('.namt-text').text(textCone);
        $('.see-pic-wrap').find('.zimg').attr('src', src);
      }
      var leftNum = 0;
      var nowLeft = 0;
      var dbSwite = true;
      $('.see-pic-wrap').find('.arow').on('click', function () {
        if (dbSwite) {
          var fx = $(this).data('fx');
          if (fx === 'left') {
            leftFn();
          } else {
            rightFn();
          }
          picCh.find('li').removeClass('active');
          picCh.find('li').eq(ylIndex).addClass('active');
          var left = parseInt(100*ylIndex);
          if (left > 400) {
            dbSwite = false;
            picCh.animate({left: -left}, function () {
              leftNum = parseInt(picCh.offset().left);
              nowLeft = left;
              dbSwite = true;
            });
          } else if (left === 400) {
            picCh.animate({left: 0}, function () {
              leftNum = parseInt(picCh.offset().left);
              nowLeft = left;
              dbSwite = true;
            });
          }
        }
      });
      picCh.find('li').on('click', function () {
        var src = $(this).data('src');
        var index = $(this).index();
        var textCone = arr[index].name;
        ylIndex = index;
        $('.see-pic-wrap').find('.zimg').attr('src', src);
        $('.see-pic-wrap').find('.namt-text').text(textCone);
        picCh.find('li').removeClass('active');
        picCh.find('li').eq(index).addClass('active');
        var left = parseInt(100*index);
        console.log(left);
        if (dbSwite) {
          if (left > 400) {
            dbSwite = false;
            picCh.animate({left: -left}, function () {
              leftNum = parseInt(picCh.offset().left);
              nowLeft = left;
              dbSwite = true;
            });
          } else if (left === 400) {
            picCh.animate({left: 0}, function () {
              leftNum = parseInt(picCh.offset().left);
              nowLeft = left;
              dbSwite = true;
            });
          }
        }
      });
    };
    watchPic(srclist);
  });
</script>